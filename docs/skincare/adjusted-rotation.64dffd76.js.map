{"version":3,"sources":["components/adjusted-rotation.js"],"names":["AFRAME","registerComponent","init","console","log","adjustedRotation","THREE","Vector3","updateRotation","schema","type","default","x","y","z","entity","el","object3D","radToDeg","Math","transformAxisMatrix","Matrix4","set","adjustedRotationAxes","rotation","toVector3","applyMatrix4","data","update","tick","remove","pause","play"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACAA,MAAM,CAACC,iBAAP,CAAyB,mBAAzB,EAA8C;AAC5CC,EAAAA,IAAI,EAAE,YAAY;AAEhBC,IAAAA,OAAO,CAACC,GAAR,CAAY,yCAAZ;AACA,SAAKC,gBAAL,GAAwB,IAAIC,KAAK,CAACC,OAAV,CAAkB,CAAlB,EAAoB,CAApB,EAAsB,CAAtB,CAAxB;AACA,SAAKC,cAAL;AACD,GAN2C;AAO5CC,EAAAA,MAAM,EAAE;AACNJ,IAAAA,gBAAgB,EAAE;AAChBK,MAAAA,IAAI,EAAE,MADU;AAEhBC,MAAAA,OAAO,EAAE;AAAEC,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE,CAAX;AAAcC,QAAAA,CAAC,EAAE;AAAjB;AAFO;AADZ,GAPoC;AAa5CN,EAAAA,cAAc,EAAE,YAAW;AACzB,QAAIO,MAAM,GAAG,KAAKC,EAAL,CAAQC,QAArB;AACA,QAAIC,QAAQ,GAAGZ,KAAK,CAACa,IAAN,CAAWD,QAA1B;AAEA,QAAIE,mBAAmB,GAAG,IAAId,KAAK,CAACe,OAAV,EAA1B;AACAD,IAAAA,mBAAmB,CAACE,GAApB,CAAwB,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC,EACE,CADF,EACK,CADL,EACQ,CAAC,CADT,EACY,CADZ,EAEE,CAFF,EAEK,CAFL,EAEQ,CAFR,EAEW,CAFX,EAGE,CAHF,EAGK,CAHL,EAGQ,CAHR,EAGW,CAHX;AAKA,QAAIC,oBAAoB,GAAGR,MAAM,CAACS,QAAP,CAAgBC,SAAhB,GAA4BC,YAA5B,CAAyCN,mBAAzC,CAA3B;AAEA,SAAKf,gBAAL,GAAwB,IAAIC,KAAK,CAACC,OAAV,CAAkBW,QAAQ,CAACK,oBAAoB,CAACX,CAAtB,CAA1B,EACtBM,QAAQ,CAACK,oBAAoB,CAACV,CAAtB,CADc,EAEtBK,QAAQ,CAACK,oBAAoB,CAACT,CAAtB,CAFc,CAAxB;AAIA,SAAKa,IAAL,CAAUtB,gBAAV,GAA6B,KAAKA,gBAAlC;AACD,GA9B2C;AA+B5CuB,EAAAA,MAAM,EAAE,YAAY,CAAE,CA/BsB;AAgC5CC,EAAAA,IAAI,EAAE,YAAY;AAChB,SAAKrB,cAAL;AACD,GAlC2C;AAmC5CsB,EAAAA,MAAM,EAAE,YAAY,CAAE,CAnCsB;AAoC5CC,EAAAA,KAAK,EAAE,YAAY,CAAE,CApCuB;AAqC5CC,EAAAA,IAAI,EAAE,YAAY,CAAE;AArCwB,CAA9C","file":"adjusted-rotation.64dffd76.js","sourceRoot":"../../src","sourcesContent":["// This component flips the coordinate frame of an object as a convenience\n// It's mostly used to transform marker rotation to the rotation we perceive onscreen\n// (Instead of being Y-up oriented)\nAFRAME.registerComponent('adjusted-rotation', {\n  init: function () {\n\n    console.log(\"adjusted rotation component initialized\")\n    this.adjustedRotation = new THREE.Vector3(0,0,0)\n    this.updateRotation()\n  },\n  schema: {\n    adjustedRotation: {\n      type: 'vec3',\n      default: { x: 0, y: 0, z: 0 }\n    }\n  },\n  updateRotation: function() {\n    let entity = this.el.object3D\n    var radToDeg = THREE.Math.radToDeg;\n\n    var transformAxisMatrix = new THREE.Matrix4();\n    transformAxisMatrix.set(1, 0, 0, 0,\n      0, 0, -1, 0,\n      0, 1, 0, 0,\n      0, 0, 0, 1);\n\n    let adjustedRotationAxes = entity.rotation.toVector3().applyMatrix4(transformAxisMatrix)\n\n    this.adjustedRotation = new THREE.Vector3(radToDeg(adjustedRotationAxes.x),\n      radToDeg(adjustedRotationAxes.y),\n      radToDeg(adjustedRotationAxes.z))\n\n    this.data.adjustedRotation = this.adjustedRotation\n  },\n  update: function () {},\n  tick: function () {\n    this.updateRotation()\n  },\n  remove: function () {},\n  pause: function () {},\n  play: function () {}\n});"]}