{"version":3,"sources":["../samples/contentstack-integration/secrets.js","js/data_sources.js","utils/getAssetURLs.js","utils/buildDynamicAssets.js","utils/createNavLinks.js","utils/detectDesktop.js","utils/makePanel.js","utils/addMarkerEvents.js","scenario3/index.js"],"names":["secrets","apiKey","environment","deliveryToken","data_sources","contentstack","personalized","getData","getStackData","$export","document","querySelector","GQL_URL","GQL_HEADERS","gqlQuery","rearrangeAPIResponse","response","newData","data","all_product","items","i","serums","length","entry","parseInt","product_name","split","contraindications","additional_contraindications","push","usage_frequency","usage_frequencyConnection","edges","map","item","node","title","marker_patt_urls","marker_fileConnection","url","product_image_urls","product_imagesConnection","ingredients","ingredient_list","ingredient_edges","ingredientsConnection","n","name","also_known_as","imageConnection","image_url","description","concentration","directions","instructions","text","step_instruction_text","sort","a","b","_id","productsByGraphQL","window","fetch","method","headers","body","JSON","stringify","query","then","json","other_product_images","cleanser","toner","moisturizer_empty","moisturizers","sunscreen","why","for_you","ratings","approval","friends_who_like","personal","positive","reviews","user","testimonial","ingredientURLs","productURLs","forEach","serum","ingredient","domId","replace","toLowerCase","undefined","productId","assets","container","Object","keys","assetName","imgEl","createElement","setAttribute","require","console","log","prepend","createAnchor","href","classNames","anchorEl","innerHTML","className","navLinks","allPages","scenario1","scenario2","scenario3","pagesArray","homeText","splitPath","location","pathname","routeIndex","currRoute","pageIndex","indexOf","prevPage","nextPage","join","homeSplit","slice","homeHref","isTouchDevice","screenX","panel","content","components","initializeFromData","tagToProduct","target","markerArray","found","lost","marker","addEventListener","e","id","productID","ready","fn","readyState","setTimeout","main","navContainer","navLink","appendChild","alert","aAssetContainer","forYouType","usageType","benefitsType","scenarioData","generateContentFanData","csProduct","localProduct","productData","forYou","usage","benefits","j","toUpperCase","type","icon","$contentFan","getElementById","contentFan","contentfan","$tabMenu","$reviewContent","$productContent","$reviewMenu","$serumMarkers","querySelectorAll","foundProduct","lostProduct","buildWithContentElements","anchorRef","mainMarkerRef","removeAttribute","object3D","visible","incrementSelectedIndex","confirmSelectedIndex","saveReviewData","index","detail","selectIndex","animateToContent"],"mappings":"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","file":"scenario3.07e4cdf5.js","sourceRoot":"../../src","sourcesContent":["const secrets = {\n  apiKey: 'blte63f7056be4da683',\n  environment: 'localhost-dev',\n  deliveryToken: 'cs01d945711b0bb626d33ad776',\n}\nexport default secrets;","import secrets from '../../samples/contentstack-integration/secrets';\n\nconst data_sources = {\n  contentstack: {},\n  personalized: {},\n  getData: () => 0\n}\n\nasync function getStackData() {\n  const $export = document.querySelector('#cleaned_output');\n\n  const GQL_URL = `https://graphql.contentstack.com/stacks/${secrets.apiKey}?environment=${secrets.environment}`\n  const GQL_HEADERS = {\n    'Content-Type': 'application/json',\n    'access_token': secrets.deliveryToken,\n  };\n  const gqlQuery = `{\n    all_product(where: {product_line: \"Serums\"}) {\n      items {\n        title\n        product_name\n        brand\n        product_line\n        upc\n        form\n        amount {\n          quantity\n          measurement\n        }\n        packaging {\n          type\n        }\n        rating\n        additional_contraindications\n        usage_frequencyConnection(limit:7) {\n          edges {\n            node {\n              ... on UsageTimeTags {\n                title\n              }\n            }\n          }\n        }\n        marker_fileConnection(limit: 3) {\n          edges {\n            node {\n              title\n              url\n            }\n          }\n        }\n        product_imagesConnection(limit: 1) {\n          edges {\n            node {\n              title\n              url\n            }\n          }\n        }\n        instructions {\n          step_instruction_text\n        }\n        ingredient_list {\n          concentration\n          ingredientsConnection {\n            edges {\n              node {\n                ... on Ingredient {\n                  title\n                  name\n                  also_known_as\n                  description\n                  imageConnection {\n                    edges {\n                      node {\n                        title\n                        url\n                      }\n                    }\n                  }\n                  contraindications\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }`;\n  function rearrangeAPIResponse(response) {\n    let newData = {};\n    if (response?.data?.all_product) {\n      newData = {'serums': [...response.data.all_product.items]};\n      for (let i = 0; i < newData.serums.length; i++) {\n          const entry = {\n          // Add an id (What serum no. is it?)\n          '_id': parseInt(newData.serums[i].product_name.split(' ')[2]),\n          ...newData.serums[i]\n        }\n        // Remove nesting of references\n        // ✔️ contraindications (see ingredients below)\n        entry.contraindications = []; \n        if (entry.additional_contraindications?.length) {\n          entry.contraindications.push(entry.additional_contraindications);\n        }\n        delete(entry.additional_contraindications);\n        // ✔️ usage frequency\n        entry.usage_frequency = entry.usage_frequencyConnection.edges.map((item) => item.node.title);\n        delete(entry.usage_frequencyConnection);\n        // ✔️ marker pattern\n        entry.marker_patt_urls = entry.marker_fileConnection.edges.map((item) => item.node.url);\n        delete(entry.marker_fileConnection);\n        // ✔️ product image\n        entry.product_image_urls = entry.product_imagesConnection.edges.map((item) => item.node.url);\n        delete(entry.product_imagesConnection);\n        // ✔️ ingredients\n        entry.ingredients = entry.ingredient_list.map((item) => {\n          const ingredient_edges = item.ingredientsConnection.edges;\n          if (ingredient_edges.length) {\n            // There will only be one ingredient in the ingredientsConnection\n            const n = {};\n            n.name = ingredient_edges[0].node.name;\n            n.also_known_as = ingredient_edges[0].node.also_known_as;\n            if ('edges' in ingredient_edges[0].node.imageConnection && \n                ingredient_edges[0].node.imageConnection.edges.length) {\n              n.image_url = ingredient_edges[0].node.imageConnection.edges[0].node.url;\n            }\n            n.description = ingredient_edges[0].node.description;\n            if (item.concentration) n.concentration = item.concentration;\n            // Add the contraindications \n            if (ingredient_edges[0].node.contraindications) {\n              entry.contraindications.push(ingredient_edges[0].node.contraindications);\n            }\n            return n;\n          } \n        });\n        delete(entry.ingredient_list);\n        // simplify usage instructions\n        entry.directions = entry.instructions.map((item) => {return {text: item.step_instruction_text}});\n        delete(entry.instructions);\n        newData.serums[i] = entry;\n      }\n    }\n    // console.log(newData);\n    // Sort the serums\n    newData.serums.sort((a,b) => a._id - b._id);\n    return newData;\n  }\n\n  // Guidance here: https://graphql.org/learn/serving-over-http/#http-methods-headers-and-body\n  const productsByGraphQL = await window.fetch(\n    GQL_URL,\n    {\n      method: 'POST', \n      headers: GQL_HEADERS,\n      body: JSON.stringify({query: gqlQuery})\n    }\n    )\n  .then(response => response.json())\n  .then(data => rearrangeAPIResponse(data));\n\n  data_sources.contentstack = productsByGraphQL;\n}\n\n// This data would be stored in another database.\ndata_sources.personalized = {\n  other_product_images: {\n    cleanser: 'https://images.contentstack.io/v3/assets/blte63f7056be4da683/blt2768458962874adb/5f5d73c7ace172423d8845be/01_Cleanser_3.png',\n    toner: 'https://images.contentstack.io/v3/assets/blte63f7056be4da683/blt3b2f9c68cda139c8/5f5d73b82917074cd81a2925/02_Toner_3.png',\n    moisturizer_empty: 'https://images.contentstack.io/v3/assets/blte63f7056be4da683/blt879660a27aedbfec/5f5d73a665c9c14aec2fb9f7/04_Moisturizer_0.png',\n    moisturizers: [\n      'https://images.contentstack.io/v3/assets/blte63f7056be4da683/blta69fd32048fdecab/5f5d740674038f4956e098d8/04_Moisturizer_1.png',\n      'https://images.contentstack.io/v3/assets/blte63f7056be4da683/blt7e0ba1616f10fbd1/5f5d85e42917074cd81a2929/04_Moisturizer_7.png'\n    ],\n    sunscreen: 'https://images.contentstack.io/v3/assets/blte63f7056be4da683/blt80ab90086435bebe/5f5d739883eade441b6a6ae8/05_Sunscreen_0.png'\n  },\n  serums: [\n    {\n      _id: 1,\n      why: [\n        'Your goal is anti-aging.',\n        'Better than leading competitors\\' products.',\n        'Cheaper than leading competitors\\' products.',\n        'Sweet floral fragrance!'\n      ],\n      for_you: [\n        {\n          title: 'Conserve and save',\n          text: 'You\\'ve used Serum for 3 weeks with smoother skin? Consider increasing your concentration from 2% to 5% to increase cell turnover at an even faster rate.'\n        },\n        {\n          title: 'Shields up',\n          text: 'The UV index is super high today in your area! Make sure to apply sunscreen throughout the day after using this serum.'\n        }  \n      ],\n      \n      ratings: {\n        approval: 86,\n        friends_who_like: 6,\n        personal: {\n          //personal review field - positive or negative (potential for text feedback in future)\n          positive: null,\n        },\n        reviews: [\n          {\n            user: 'yourfriendjen',\n            title: 'THE BEST SERUM OUT THERE',\n            testimonial: '\"This made such a huge difference with my combination-dry skin. My pores seem smaller, my skin brighter, and my complexion more even. I could go on for daaays about how great this Serum is, but trust me, you need to try it!\"'\n          }\n        ]\n      }\n    },\n    {\n      _id: 2,\n      why: [\n        'Your goal is moisturizing.',\n        'Better than leading competitors\\' products.',\n        'Borage seed is a natural mellowing agent.',\n        'No allergens for you!'\n      ],\n      for_you: [\n        {\n          title: 'Feeling drier?',\n          text: 'Humidity forecasts are down for your location. Use a water-based solution to hydrate skin, then apply drops as needed.'\n        },\n        {\n          title: 'Relax naturally',\n          text: 'If you’re feeling a bit stressed out, know that Borage Seed Oil also creates a natural calming effect.'\n        }  \n      ],\n      ratings: {\n        approval: 47,\n        friends_who_like: 2,\n        personal: {\n          positive: null,\n        },\n        reviews: [\n          {\n            user: 'yourfriendjen',\n            title: 'THE BEST SERUM OUT THERE',\n            testimonial: '\"This made such a huge difference with my combination-dry skin. My pores seem smaller, my skin brighter, and my complexion more even.\"'\n          }\n        ]\n      }\n    },\n    {\n      _id: 3,\n      why: [\n        'Your goal is smoother skin.',\n        'Better than leading competitors\\' products.',\n        'Cheaper than leading competitors\\' products.',\n        'No allergens for you!'\n      ],\n      for_you: [\n        {\n          title: 'Next level',\n          text: 'Need more moisturizer? See our site to learn how to add our face oils into your routine to better hydrate your skin…'\n        },\n        {\n          title: 'Shields up',\n          text: 'The UV index is super high today in your area! Make sure to apply sunscreen throughout the day after using this serum.'\n        }  \n      ],\n      ratings: {\n        approval: 86,\n        friends_who_like: 6,\n        personal: {\n          positive: null,\n        },\n        reviews: [\n          {\n            user: 'yourfriendjen',\n            title: 'THE BEST SERUM OUT THERE',\n            testimonial: '\"This made such a huge difference with my combination-dry skin. My pores seem smaller, my skin brighter, and my complexion more even.\"'\n          }\n        ]\n      }\n    }\n  ],\n\n}\n\ndata_sources.getData = getStackData;\n// console.log('inside data_sources.js and ',data_sources);\n\nexport default data_sources;","export default (data) => {\n\n  /**\n   * The job of this function is to:\n   * go through the data, identify ingredient and product assets URLs,\n   * return them in organized format\n   * \n   * future work:\n   * expand data response to include other assets, eg. videos, moisturizer images\n   */\n\n  const ingredientURLs = {};\n  const productURLs = {};\n\n  data.contentstack?.serums?.forEach(serum => {\n\n    serum.ingredients?.forEach(ingredient => {\n      // remove white space and lowercase to create the dom id\n      const domId = ingredient.name.replace(/ /g, '').toLowerCase();\n      // no duplicates\n      if (ingredientURLs[domId] === undefined && ingredient.image_url) {\n        ingredientURLs[domId] = ingredient.image_url;\n      }\n      // perhaps we need to be more clever and check the also_known_as names\n    })\n\n    const productId = `serum${serum._id}`;\n\n    if (serum.product_image_urls.length) {\n      productURLs[productId] = serum.product_image_urls[0];\n    }\n\n  });\n\n  return {\n    ingredientURLs,\n    productURLs\n  }\n\n};","export default (assets, container) => {\n\n  Object.keys(assets).forEach(assetName => {\n    const imgEl = document.createElement('img'); \n    imgEl.setAttribute('id', assetName);\n    imgEl.setAttribute('crossorigin', \"anonymous\");\n    // add a generic fallback image if the ingredientURL is undefined\n    if (assets[assetName] === undefined) {\n      assets[assetName] = require('../assets/generic.png');\n      console.log(`updated undefined ${assetName} to fallbackImageURL`);\n    }\n    imgEl.setAttribute('src', assets[assetName]);\n    container.prepend(imgEl);\n  })\n\n\n}","const createAnchor = (href, text, classNames) => {\n  const anchorEl = document.createElement('a');\n  anchorEl.href = href;\n  anchorEl.innerHTML = text;\n  anchorEl.className = classNames;\n  return anchorEl;\n}\n\nexport default () => {\n\n  // returns an array of nav links depending on the current page\n  const navLinks = [];\n\n  const allPages = {\n    scenario1: 'IN STORE',\n    scenario2: 'AT HOME',\n    scenario3: 'LATER',\n  };\n  const pagesArray = Object.keys(allPages).sort();\n  const homeText = '';\n    \n  // get current route\n  const splitPath = window.location.pathname.split('/');\n  const routeIndex = splitPath.length - 2;\n  const currRoute = splitPath[routeIndex];\n\n  const pageIndex = pagesArray.indexOf(currRoute);\n\n  if (!currRoute || pageIndex === -1) {\n    // we are on the home page and already have our navlinks\n    return navLinks;\n  }\n\n  const prevPage = pagesArray[pageIndex - 1];\n  const nextPage = pagesArray[pageIndex + 1];\n  // add prev page link\n  if (prevPage) {\n    splitPath[routeIndex] = prevPage;\n    const href = splitPath.join('/');\n    const text = `&larr; ${allPages[prevPage]}`;\n    const classNames = 'navlink navlink-left';\n    navLinks.push(\n      createAnchor(href, text, classNames)\n    );\n  }\n  // add next page link\n  if (nextPage) {\n    splitPath[routeIndex] = nextPage;\n    const href = splitPath.join('/');\n    const text = `${allPages[nextPage]} &rarr;`;\n    const classNames = 'navlink navlink-right';\n    navLinks.push(\n      createAnchor(href, text, classNames)\n    );\n  }\n\n  // add home page link\n  const homeSplit = splitPath.slice(0, routeIndex);\n  const homeHref = homeSplit.length > 1 ? homeSplit.join('/') : '/';\n  const classNames = 'navlink navlink-center';\n  navLinks.push(\n    createAnchor(homeHref, homeText, classNames)\n  );\n\n  return navLinks;\n\n};","export default () => {\n  const isTouchDevice = () => 'ontouchstart' in window || 'onmsgesturechange' in window;\n  return window.screenX != 0 && !isTouchDevice() ? true : false;\n}","export default data => {\n  // Build content panels with \"data\"\n  var panel = document.createElement('a-entity');\n  panel.setAttribute(\"content-group\", \"\");\n\n  let content = panel.components['content-group'];\n  content.initializeFromData(data);\n\n  return panel\n};","const tagToProduct = target => {\n  switch(target) {\n    case \"serum_1_marker\":\n    case \"mainMarker\":\n      return 1;\n    case \"serum_2_marker\":\n      return 2;\n    case \"serum_3_marker\":\n      return 3;\n    default:\n    return null;\n  }\n}\n\nexport default (markerArray, found, lost) => {\n\n\n  markerArray.forEach(marker => {\n\n    if (typeof found === 'function') {\n      marker.addEventListener(\"markerFound\", e => {\n        console.log('a-marker with id', e.target.id);\n        const productID = tagToProduct(e.target.id);\n        if (productID) {\n          console.log(\"Detected product \", productID);\n          // call found function\n          found(productID);\n        }\n      })\n    }\n\n    if (typeof lost === 'function') {\n      marker.addEventListener(\"markerLost\", e => {\n        const productID = tagToProduct(e?.target?.id);\n        if (productID) {\n          console.log(\"Lost product \", productID);\n          // call lost function\n          lost(productID);\n        }\n      })\n    }\n    \n  });\n\n}","import data_sources from '../js/data_sources';\nimport getAssetURLs from '../utils/getAssetURLs';\nimport buildDynamicAssets from '../utils/buildDynamicAssets';\nimport createNavLinks from '../utils/createNavLinks';\nimport detectDesktop from '../utils/detectDesktop';\nimport makePanel from '../utils/makePanel';\nimport addMarkerEvents from '../utils/addMarkerEvents';\n\nfunction ready(fn) {\n  // replaces $(document).ready() in jQuery\n  if (document.readyState != 'loading'){\n    setTimeout(fn, 1000);\n  } else {\n    document.addEventListener('DOMContentLoaded', function() {\n      setTimeout(fn, 1000);\n    });\n  }\n}\n\nready(async function() {\n  console.log( \"DOM loaded\" );\n\n  // create nav links\n  const main = document.querySelector('main');\n  const navContainer = document.createElement('section');\n  navContainer.className = 'nav-container';\n  const navLinks = createNavLinks();\n  navLinks.forEach(navLink => navContainer.appendChild(navLink))\n  main.appendChild(navContainer);\n\n  await data_sources.getData();\n  \n  // detect desktop and alert\n  if (detectDesktop()) {\n    alert('For a better experience, use on mobile!');\n  }\n  let productID = null;\n\n  // get dynamic URLs from data response, build assets and add them to the asset container\n  const { ingredientURLs } = getAssetURLs(data_sources);\n  const aAssetContainer = document.querySelector('a-assets');\n  buildDynamicAssets(ingredientURLs, aAssetContainer);\n\n  const forYouType = \"text-paragraph-bar\";\n  const usageType = \"textwithicon\";\n  const benefitsType = \"textwithicon\";\n\n  const scenarioData = [];\n  \n  function generateContentFanData() {\n    for (let i = 0; i < data_sources.contentstack.serums.length; i++) {\n      const csProduct = data_sources.contentstack.serums[i];\n      const localProduct = data_sources.personalized.serums[i];\n      const productData = {\n        forYou: [],\n        usage: [],\n        benefits: []\n      }\n      for (let j = 0; j < localProduct.for_you.length; j++) {\n        productData.forYou.push({\n          title: localProduct.for_you[j].title.toUpperCase(),\n          body: localProduct.for_you[j].text,\n          type: forYouType\n        })\n      }\n      for (let j = 0; j < csProduct.directions.length; j++) {\n        productData.usage.push({\n          icon: \"#step\"+(j+1),\n          title: null,\n          body: csProduct.directions[j].text,\n          type: usageType\n        });\n      }\n      for (let j=0; j < csProduct.ingredients.length && j < 2; j++) {\n        productData.benefits.push({\n          icon: '#'+csProduct.ingredients[j].name.toLowerCase().split(' ').join(''),\n          title: csProduct.ingredients[j].name.toUpperCase(),\n          body: csProduct.ingredients[j].description,\n          type: benefitsType\n        });\n      }\n      scenarioData.push(productData);\n    }\n  }\n  generateContentFanData();\n\n  const $contentFan = document.getElementById(\"contentFan\");\n  const contentFan = $contentFan.components.contentfan\n  const $tabMenu = document.getElementById('tab-menu');\n  const $reviewContent= document.getElementById('review-content'); // menu and text\n  const $productContent = document.getElementById('product-content');\n  const $reviewMenu = document.getElementById('review-product-menu');\n  const $serumMarkers = document.querySelectorAll('a-marker');\n\n  const foundProduct = id => {\n    productID = id;\n  }\n\n  const lostProduct = () => {\n    productID = null;\n  }\n\n  addMarkerEvents($serumMarkers, foundProduct, lostProduct);\n\n  // These are out of order bc I'm bad: 3 1 2\n  contentFan.buildWithContentElements([\n    makePanel(scenarioData[0].benefits), \n    makePanel(scenarioData[0].forYou), \n    makePanel(scenarioData[0].usage)\n  ]);\n\n  var anchorRef = document.getElementById('twistParent');\n  var mainMarkerRef = document.getElementById('mainMarker');\n\n  // Get reference to menu confirm\n  $reviewMenu.addEventListener('tab-confirm', (e)=>{ // your code here}\n    // Hide review menu\n    // Remove marker tracker from review content\n    $reviewContent.removeAttribute(\"marker-tracker\");\n    $reviewContent.object3D.visible = false;\n\n    // Once we've reviewed the product, add the component to our content so it's trackable\"\n    $productContent.setAttribute(\"marker-tracker\", \"isPromiscuous: true; lossThreshold: 3000;\")\n  })\n\n  mainMarkerRef.addEventListener(\"tilt-side\", (e)=>{ // your code here}\n    $reviewMenu.components[\"tab-menu\"].incrementSelectedIndex()\n  })\n\n  mainMarkerRef.addEventListener(\"tilt-forward\", (e)=>{ // your code here}\n    $reviewMenu.components[\"tab-menu\"].confirmSelectedIndex();\n    $reviewMenu.components[\"tab-menu\"].saveReviewData(productID);\n  })\n\n  anchorRef.addEventListener(\"tag-index-trigger\", (e)=>{ // your code here}\n    let index = e.detail.index\n    $tabMenu.components[\"tab-menu\"].selectIndex(index)\n    contentFan.animateToContent(index)\n  })\n});\n\n\n\n\n\n"]}