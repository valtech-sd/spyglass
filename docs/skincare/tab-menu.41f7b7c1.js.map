{"version":3,"sources":["components/tab-menu.js"],"names":["AFRAME","registerComponent","schema","tabSpacing","type","default","init","tabElements","el","querySelectorAll","tabComponents","spacing","data","confirmedSelection","selectedIndex","self","forEach","tag","index","textTab","components","iconTab","tabComponent","push","tabWidth","getWidth","console","log","object3D","position","x","select","deselect","selectIndex","i","confirmIndex","length","confirm","setTimeout","emit","incrementSelectedIndex","numTabs","indexToSelect","decrementSelectedIndex","confirmSelectedIndex","update","tick","remove","pause","play"],"mappings":"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","file":"tab-menu.41f7b7c1.js","sourceRoot":"../../src","sourcesContent":["// Register custom components before loading HTML\n// TODO: This should actually be a combo of a component and a system...!\n// We shouldn't do all the math in the component\n\nAFRAME.registerComponent('tab-menu', {\n  schema: {\n    tabSpacing: {\n      type: 'number',\n      default: 4.25\n    }\n  },\n  init: function () {\n\n    this.tabElements = this.el.querySelectorAll('[tabitem], [icon-tab-menu-item]');\n    this.tabComponents = []\n    this.spacing = this.data.tabSpacing\n    this.confirmedSelection = false;\n\n    this.selectedIndex = 0;\n    let self = this;\n\n    // Fetch components\n    this.tabElements.forEach( function(tag, index) {\n      let textTab = tag.components['tabitem'];\n      let iconTab = tag.components['icon-tab-menu-item'];\n      let tabComponent = (textTab) ? textTab : iconTab;\n\n      self.tabComponents.push(tabComponent);\n    });\n\n    this.tabComponents.forEach( function(tabComponent, index) {\n\n      let tabWidth = tabComponent.getWidth();\n      console.log(tabComponent)\n      tabComponent.el.object3D.position.x = tabWidth * 0.5 + index * self.data.tabSpacing\n\n      if (index == self.selectedIndex) {\n        tabComponent.select();\n      } else {\n        tabComponent.deselect();\n      }\n    })\n  },\n  selectIndex: function(index) {\n\n    // If we've already confirmed, don't allow changing selection!\n    if (this.confirmedSelection) {\n      return;\n    }\n\n    let self = this\n    this.tabComponents.forEach( function(tabComponent, i) {\n      // let tabComponent = tabEl.components.tabitem\n      if (i == index) {\n        self.selectedIndex = index;\n        tabComponent.select();\n        console.log(\"selecting\", index)\n      } else {\n        tabComponent.deselect();\n      }\n    })\n  },\n  confirmIndex: function(index) {\n    if (this.tabComponents.length > 0) {\n      if (index >= 0 && index < this.tabComponents.length) {\n        this.tabComponents[index].confirm();\n        this.confirmedSelection = true;\n\n        // This should match confirmation animation duration (or a lil longer)\n        let self = this;\n        setTimeout(function() {\n          self.el.emit('tab-confirm');\n        }, 1000)\n      }\n    }\n  },\n  incrementSelectedIndex: function() {\n    let numTabs = this.tabComponents.length\n    if (numTabs > 0) {\n      let indexToSelect = (this.selectedIndex + 1) % numTabs;\n      this.selectIndex(indexToSelect);\n    }\n  },\n  decrementSelectedIndex: function() {\n    let numTabs = this.tabComponents.length\n    if (numTabs > 0) {\n      let indexToSelect = (this.selectedIndex == 0) ? numTabs - 1 : (this.selectedIndex - 1) % numTabs;\n      this.selectIndex(indexToSelect);\n    }\n  },\n  confirmSelectedIndex: function() {\n    this.confirmIndex(this.selectedIndex);\n  },\n  update: function () {},\n  tick: function () {\n\n  },\n  remove: function () {},\n  pause: function () {},\n  play: function () {}\n});"]}