{"version":3,"sources":["../samples/contentstack-integration/secrets.js","js/data_sources.js","scenario1/in-store.js"],"names":["secrets","apiKey","environment","deliveryToken","data_sources","contentstack","personalized","getStackData","$export","document","querySelector","GQL_URL","GQL_HEADERS","gqlQuery","rearrangeAPIResponse","response","newData","data","all_product","items","i","serums","length","entry","parseInt","product_name","split","contraindications","additional_contraindications","push","usage_frequency","usage_frequencyConnection","edges","map","item","node","title","marker_patt_urls","marker_fileConnection","url","product_image_urls","product_imagesConnection","ingredients","ingredient_list","ingredient_edges","ingredientsConnection","n","name","also_known_as","imageConnection","image_url","concentration","directions","instructions","text","step_instruction_text","productsByGraphQL","window","fetch","method","headers","body","JSON","stringify","query","then","json","other_product_images","cleanser","toner","moisturizer_empty","moisturizers","sunscreen","_id","why","for_you","ratings","approval","friends_who_like","reviews","user","testimonial","ready","fn","readyState","addEventListener","console","log","$statusLabel","$scanner","$scanLine","$main","$tray","$backButton","$addButton","$serumMarkers","querySelectorAll","$contentFan_1","getElementById","$tabMenu_1","$tabMenu_2","$contentFan_2","$tabMenu_3","$contentFan_3","pause","millis","endTime","Date","getTime","Promise","resolve","ticktock","requestAnimationFrame","pauseUntilEnd","eventType","el","propertyOrAnimationName","endEvent","endFunction","e","animationName","propertyName","removeEventListener","productRecognized","productID","innerHTML","classList","add","textContent","remove","productOutOfView","backToExplore","stopPropagation","preventDefault","addToRoutine","tagToProduct","target","forEach","$marker","id","checkType","checkData","type","reviewType","reviewsData","benefitsType","benefitsData","icon","makePanel","panel","createElement","setAttribute","content","components","initializeFromData","setTimeout","initializeScenario1","contentFan_1","contentfan","contentFan_2","contentFan_3","buildWithContentElements","handleTouchStart","handleTouchMove","handleSwipeLeft","incrementSelectedIndex","incrementContentIndex","handleSwipeRight","decrementSelectedIndex","decrementContentIndex","xDown","yDown","getTouches","evt","touches","firstTouch","clientX","clientY","xUp","yUp","xDiff","yDiff","Math","abs"],"mappings":"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","file":"in-store.c13b7029.js","sourceRoot":"../../src","sourcesContent":["const secrets = {\n  apiKey: 'blte63f7056be4da683',\n  environment: 'localhost-dev',\n  deliveryToken: 'cs01d945711b0bb626d33ad776',\n}\nexport default secrets;","import secrets from '../../samples/contentstack-integration/secrets';\n\nconst data_sources = {\n  contentstack: {},\n  personalized: {}\n}\n\nasync function getStackData() {\n  const $export = document.querySelector('#cleaned_output');\n\n  const GQL_URL = `https://graphql.contentstack.com/stacks/${secrets.apiKey}?environment=${secrets.environment}`\n  const GQL_HEADERS = {\n    'Content-Type': 'application/json',\n    'access_token': secrets.deliveryToken,\n  };\n  const gqlQuery = `{\n    all_product(where: {product_line: \"Serums\"}) {\n      items {\n        title\n        product_name\n        brand\n        product_line\n        upc\n        form\n        amount {\n          quantity\n          measurement\n        }\n        packaging {\n          type\n        }\n        rating\n        additional_contraindications\n        usage_frequencyConnection(limit:7) {\n          edges {\n            node {\n              ... on UsageTimeTags {\n                title\n              }\n            }\n          }\n        }\n        marker_fileConnection(limit: 3) {\n          edges {\n            node {\n              title\n              url\n            }\n          }\n        }\n        product_imagesConnection(limit: 1) {\n          edges {\n            node {\n              title\n              url\n            }\n          }\n        }\n        instructions {\n          step_instruction_text\n        }\n        ingredient_list {\n          concentration\n          ingredientsConnection {\n            edges {\n              node {\n                ... on Ingredient {\n                  title\n                  name\n                  also_known_as\n                  imageConnection {\n                    edges {\n                      node {\n                        title\n                        url\n                      }\n                    }\n                  }\n                  contraindications\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }`;\n  function rearrangeAPIResponse(response) {\n    let newData = [];\n    if (response?.data?.all_product) {\n      newData = {'serums': [...response.data.all_product.items]};\n      for (let i = 0; i < newData.serums.length; i++) {\n          const entry = {\n          // Add an id (What serum no. is it?)\n          '_id': parseInt(newData.serums[i].product_name.split(' ')[2]),\n          ...newData.serums[i]\n        }\n        // Remove nesting of references\n        // ✔️ contraindications (see ingredients below)\n        entry.contraindications = []; \n        if (entry.additional_contraindications?.length) {\n          entry.contraindications.push(entry.additional_contraindications);\n        }\n        delete(entry.additional_contraindications);\n        // ✔️ usage frequency\n        entry.usage_frequency = entry.usage_frequencyConnection.edges.map((item) => item.node.title);\n        delete(entry.usage_frequencyConnection);\n        // ✔️ marker pattern\n        entry.marker_patt_urls = entry.marker_fileConnection.edges.map((item) => item.node.url);\n        delete(entry.marker_fileConnection);\n        // ✔️ product image\n        entry.product_image_urls = entry.product_imagesConnection.edges.map((item) => item.node.url);\n        delete(entry.product_imagesConnection);\n        // ✔️ ingredients\n        entry.ingredients = entry.ingredient_list.map((item) => {\n          const ingredient_edges = item.ingredientsConnection.edges;\n          if (ingredient_edges.length) {\n            // There will only be one ingredient in the ingredientsConnection\n            const n = {};\n            n.name = ingredient_edges[0].node.name;\n            n.also_known_as = ingredient_edges[0].node.also_known_as;\n            if ('edges' in ingredient_edges[0].node.imageConnection && \n                ingredient_edges[0].node.imageConnection.edges.length) {\n              n.image_url = ingredient_edges[0].node.imageConnection.edges[0].node.url;\n            }\n            if (item.concentration) n.concentration = item.concentration;\n            // Add the contraindications \n            if (ingredient_edges[0].node.contraindications) {\n              entry.contraindications.push(ingredient_edges[0].node.contraindications);\n            }\n            return n;\n          } \n        });\n        delete(entry.ingredient_list);\n        // simplify usage instructions\n        entry.directions = entry.instructions.map((item) => {return {text: item.step_instruction_text}});\n        delete(entry.instructions);\n        newData.serums[i] = entry;\n      }\n    }\n    \n    return newData;\n  }\n\n  // Guidance here: https://graphql.org/learn/serving-over-http/#http-methods-headers-and-body\n  const productsByGraphQL = await window.fetch(\n    GQL_URL,\n    {\n      method: 'POST', \n      headers: GQL_HEADERS,\n      body: JSON.stringify({query: gqlQuery})\n    }\n    )\n  .then(response => response.json())\n  .then(data => rearrangeAPIResponse(data));\n\n  data_sources.contentstack = productsByGraphQL;\n}\n\ngetStackData();\n\n// This data would be stored in another database.\ndata_sources.personalized = {\n  other_product_images: {\n    cleanser: 'https://images.contentstack.io/v3/assets/blte63f7056be4da683/blt2768458962874adb/5f5d73c7ace172423d8845be/01_Cleanser_3.png',\n    toner: 'https://images.contentstack.io/v3/assets/blte63f7056be4da683/blt3b2f9c68cda139c8/5f5d73b82917074cd81a2925/02_Toner_3.png',\n    moisturizer_empty: 'https://images.contentstack.io/v3/assets/blte63f7056be4da683/blt879660a27aedbfec/5f5d73a665c9c14aec2fb9f7/04_Moisturizer_0.png',\n    moisturizers: [\n      'https://images.contentstack.io/v3/assets/blte63f7056be4da683/blta69fd32048fdecab/5f5d740674038f4956e098d8/04_Moisturizer_1.png',\n      'https://images.contentstack.io/v3/assets/blte63f7056be4da683/blt7e0ba1616f10fbd1/5f5d85e42917074cd81a2929/04_Moisturizer_7.png'\n    ],\n    sunscreen: 'https://images.contentstack.io/v3/assets/blte63f7056be4da683/blt80ab90086435bebe/5f5d739883eade441b6a6ae8/05_Sunscreen_0.png'\n  },\n  serums: [\n    {\n      _id: 1,\n      why: [\n        'Your skincare goals are anti-aging.',\n        'This serum hydrates and smooths the skin naturally to prevent wrinkles.',\n        'Sweet floral oils help refresh you in the morning and evening!'\n      ],\n      for_you: [\n        'Been using this product for 3 weeks with smoother skin? Consider dropping your concentration from 5% to 2% to get more value out of your purchase.',\n        'The UV index is super high today in your area! Make sure you make time to apply sunscreen at multiple times during the day after using this serum.'\n      ],\n      ratings: {\n        approval: 86,\n        friends_who_like: 6,\n        reviews: [\n          {\n            user: 'yourfriendjen',\n            testimonial: ''\n          }\n        ]\n      }\n    },\n    {\n      _id: 2,\n      why: [\n        'Your skincare goals include treating acne or irritated skin.',\n        'Borage Seed is a natural mellowing agent.',\n        'You\\'re stressed out, friend.'\n      ],\n      for_you: [\n        'Humidity forecasts are down for your location, so your skin may feel drier than usual, use a water based solution to hydrate your skin, then apply drops as needed.',\n        'If you’re feeling a bit stressed out, Borage Seed Oil also offers a calming effect in addition to helping maintain healthy skin.'\n      ],\n      ratings: {\n        approval: 47,\n        friends_who_like: 2,\n        reviews: [\n          {\n            user: 'yourfriendjen',\n            testimonial: ''\n          }\n        ]\n      }\n    },\n    {\n      _id: 3,\n      why: [\n        'Your skincare goals include smoother skin.',\n        'Of our three serums, this serum exfoliates and brightens, while also moisturizing, all of which dry skin needs.',\n        'Get more value with greater quantity at lower price than our competing brands.'\n      ],\n      for_you: [\n        'Need more moisturizer? Here\\'s how to add our face oils into your routine to better hydrate your skin…',\n        'The UV index is super high today in your area! Make sure you make time to apply sunscreen at multiple times during the day after using this serum.'\n      ],\n      ratings: {\n        approval: 86,\n        friends_who_like: 6,\n        reviews: [\n          {\n            user: 'yourfriendjen',\n            testimonial: ''\n          }\n        ]\n      }\n    }\n  ],\n\n}\n\nexport default data_sources;","import data_sources from '../js/data_sources';\n\nfunction ready(fn) {\n  // replaces $(document).ready() in jQuery\n  if (document.readyState != 'loading'){\n      fn();\n  } else {\n      document.addEventListener('DOMContentLoaded', fn);\n  }\n}\n\nready(() => {\n  console.log('DOM is ready.');\n  console.log(data_sources);\n  const $statusLabel = document.querySelector('#status_label');\n  const $scanner = document.querySelector('#scanner');\n  const $scanLine = document.querySelector('#scanner svg line');\n  const $main = document.querySelector('main');\n  const $tray = document.querySelector('#tray');\n  const $backButton = document.querySelector('a.back');\n  const $addButton = document.querySelector('a.add');\n  const $serumMarkers = document.querySelectorAll('a-marker');\n\n\n  // TODO: Jason please fix my selectors to be smarter T_T\n\n  let $contentFan_1 = document.getElementById(\"contentFan_serum1\");\n  let $tabMenu_1 = document.getElementById('tab-menu-1');\n\n  let $tabMenu_2 = document.getElementById('tab-menu-2');\n  let $contentFan_2 = document.getElementById(\"contentFan_serum2\");\n\n  let $tabMenu_3 = document.getElementById('tab-menu-3');\n  let $contentFan_3 = document.getElementById(\"contentFan_serum3\");\n\n  /** Two useful functions:\n    * - pause(X) \n    *    returns a promise that resolves after X milliseconds.\n    * \n    * - pauseUntilEnd('transition', $el, 'property_name') ~or~\n    *   pauseUntilEnd('animation', $el, 'anim_name')\n    *    (where property_name and anim_name are optional)\n    *    returns a promise that resolves when an animation or \n    *    transition finishes.\n    * \n    * Put them inside an async function and use like so:\n    *   await pause(750)\n    * ...and it will wait before moving on.\n    */\n  async function pause(millis) {\n    const endTime = new Date(new Date().getTime() + millis);\n    return new Promise((resolve) => {\n      function ticktock() {\n        if (new Date() >= endTime) {\n          resolve(true);\n        } else {\n          requestAnimationFrame(ticktock);\n        }\n      }\n      ticktock();\n    })\n  }\n  async function pauseUntilEnd(eventType, el, propertyOrAnimationName) {\n    let endEvent = 'transitionend';\n    switch (eventType) {\n      case 'animation':\n      case 'a':\n        endEvent = 'animationend';\n        break;\n      case 'transition':\n      case 't':\n      default:\n        endEvent = 'transitionend';\n        break;\n    }\n    return new Promise((resolve) => {\n      const endFunction = (e) => {\n        // If specifying the property name on a transition / the animation name on animation...\n        if (propertyOrAnimationName) {\n          // ...ignore all events that aren't the end of this particular animation/transition.\n          if (endEvent === 'animationend' && e.animationName !== propertyOrAnimationName) return;\n          if (endEvent === 'transitionend' && e.propertyName !== propertyOrAnimationName) return;\n        }\n        // Clean up after.\n        el.removeEventListener(endEvent, endFunction);\n        resolve(true);\n      }\n      el.addEventListener(endEvent, endFunction);\n    });\n  }\n  \n  async function productRecognized(productID) {\n    // TODO: recognize which product it is and cue up the data in A-Frame here\n\n    // Kick off the animation to scan.\n    $statusLabel.innerHTML = 'Scanning...';\n    $scanner.classList.add('scanning');\n    await pauseUntilEnd('a', $scanLine, 'blip');\n    $statusLabel.textContent = 'Found!';\n    $scanner.classList.add('complete');\n    $main.classList.add('serum'+productID);\n    await pause(750);\n    $main.classList.add('found');\n    $main.classList.remove('serum'+productID);\n    $scanner.classList.remove('scanning');\n    $scanner.classList.remove('complete');\n  }\n\n  function productOutOfView(e) {\n    // Remove all classes from scanner\n    $scanner.classList.remove('scanning');\n    $scanner.classList.remove('complete');\n    // Reset the label\n    $statusLabel.innerHTML = 'Explore Serums';\n  }\n  function backToExplore(e) {\n    // Prevent link from going anywhere\n    e.stopPropagation();\n    e.preventDefault();\n    // Reset the label\n    $statusLabel.innerHTML = 'Explore Serums';\n    $scanner.classList.remove('scanning');\n    $scanner.classList.remove('complete');\n    $main.classList.remove('found');\n    $main.classList.remove('serum1');\n    $main.classList.remove('serum2');\n    $main.classList.remove('serum3');\n    // ...which will slide up the tray.\n    // Prevent changing the URL?\n    return false;\n  }\n\n  async function addToRoutine(e) {\n    // Prevent link from going anywhere\n    e.stopPropagation();\n    e.preventDefault();\n\n    $statusLabel.textContent = 'Explore Serums';\n    $scanner.classList.remove('scanning');\n    $scanner.classList.remove('complete');\n    $main.classList.remove('found');\n    await pauseUntilEnd('transition', $tray, 'bottom');\n\n    $statusLabel.textContent = 'Explore Moisturizers';\n    $tray.classList.remove('step-3');\n    $tray.classList.add('step-4');\n    await pause(1000);\n\n    console.log('moving to scenario 2');\n    // TODO: Add listener when click on going-home interstitial\n    $main.classList.add('going-home');\n    // Prevent changing the URL?\n    return false;\n  }\n\n  function tagToProduct(target) {\n    switch(target) {\n      case \"serum_1_marker\":\n        return 1;\n      case \"serum_2_marker\":\n        return 2;\n      case \"serum_3_marker\":\n        return 3;\n      default:\n      return null;\n    }\n  }\n\n\n  $serumMarkers.forEach(function($marker) {\n\n    $marker.addEventListener(\"markerFound\", (e)=>{ // your code here}\n      let target = e.target;\n      let productID = tagToProduct(target.id);\n\n      if (productID) {\n        console.log(\"Detected product \", productID);\n\n        // call productRecognized\n        productRecognized(productID);\n      }\n    })\n\n    $marker.addEventListener(\"markerLost\", (e)=>{ // your code here}\n      let target = e.target;\n      let productID = tagToProduct(target.id);\n\n      if (productID) {\n        console.log(\"Lost product \", productID);\n\n        // Call productOutOfView\n        productOutOfView(productID)\n      }\n    })\n  });\n\n\n  // Fake data for scenario 1\n  let checkType = \"numbered-text\";\n  let checkData = [\n    {\n      title: \"1\",\n      body: \"Your goal is moisturizing.\",\n      type: checkType\n    }, {\n      title: \"2\",\n      body: \"Better than leading competitors' products.\",\n      type: checkType\n    }, {\n      title: \"3\",\n      body: \"Cheaper than leading competitors' products.\",\n      type: checkType\n    }, {\n      title: \"4\",\n      body: \"No allergens for you!\",\n      type: checkType\n    }\n    ];\n\n  let reviewType = \"numbered-text\"\n  let reviewsData = [\n    {\n      title: \"THE BEST SERUM OUT THERE\",\n      body: \"\\n\\\"This made such a huge difference with my combination-dry skin. My pore seem smaller, my skin brighter, and my complexion more even.\\\"\",\n      type: reviewType\n    }\n    ];\n\n  let benefitsType = \"textwithicon\"\n  let benefitsData = [\n    {\n      icon: \"#ylangylang\",\n      title: \"YLANG YLANG\",\n      body: \"Sweet, exotic and floral, essential oil distilled from the fragrant flowers..\",\n      type: benefitsType\n    }, {\n      icon: \"#panthenol\",\n      title: \"PANTHENOL\",\n      body: \"Also called B5 Vitamin, moisturizes the skin.\",\n      type: benefitsType\n    }];\n  // let benefitsData = [\n  //   {\n  //     icon: \"#warning\",\n  //     title: \"INTERACTIONS\",\n  //     body: data_sources.contentstack.serums[0].contraindications[0],\n  //     type: benefitsType\n  //   }\n  // ];\n\n  let makePanel = function(data) {\n    // Build content panels with \"data\"\n    var panel = document.createElement('a-entity');\n    panel.setAttribute(\"content-group\", \"\");\n\n    let content = panel.components['content-group'];\n    content.initializeFromData(data);\n\n    return panel\n  }\n\n  setTimeout(initializeScenario1, 1000);\n\n  function initializeScenario1() {\n\n    // Build content panels with \"data\"\n    let contentFan_1 = $contentFan_1.components.contentfan\n    let contentFan_2 = $contentFan_2.components.contentfan\n    let contentFan_3 = $contentFan_3.components.contentfan\n\n    // Add content to content fan\n    // At some point we can find a better way to sync this w/the tab menu\n    contentFan_1.buildWithContentElements([makePanel(benefitsData), makePanel(checkData), makePanel(reviewsData)]);\n    contentFan_2.buildWithContentElements([makePanel(benefitsData), makePanel(checkData), makePanel(reviewsData)]);\n    contentFan_3.buildWithContentElements([makePanel(benefitsData), makePanel(checkData), makePanel(reviewsData)]);\n\n    // Add listeners for buttons\n    $backButton.addEventListener('click', backToExplore);\n    $addButton.addEventListener('click', addToRoutine);\n    // This is temporary, until we have onmarkerfound event...\n    // $tray.addEventListener('click', productRecognized);\n\n    // Swipe detection\n    document.addEventListener('touchstart', handleTouchStart, false);\n    document.addEventListener('touchmove', handleTouchMove, false);\n\n    // document.addEventListener('swipeleft', handleSwipeLeft, false);\n    // document.addEventListener('swiperight', handleSwipeRight, false);\n\n    function handleSwipeLeft() {\n      // We are just broadcasting swipes to everyone...not ideal!\n      $tabMenu_1.components[\"tab-menu\"].incrementSelectedIndex()\n      $tabMenu_2.components[\"tab-menu\"].incrementSelectedIndex()\n      $tabMenu_3.components[\"tab-menu\"].incrementSelectedIndex()\n\n      $contentFan_1.components.contentfan.incrementContentIndex()\n      $contentFan_2.components.contentfan.incrementContentIndex()\n      $contentFan_3.components.contentfan.incrementContentIndex()\n\n      // $tabMenu.components.\n    }\n\n    function handleSwipeRight() {\n      console.log(\"swipe right!\")\n      // We are just broadcasting swipes to everyone...not ideal!\n      $tabMenu_1.components[\"tab-menu\"].decrementSelectedIndex()\n      $tabMenu_2.components[\"tab-menu\"].decrementSelectedIndex()\n      $tabMenu_3.components[\"tab-menu\"].decrementSelectedIndex()\n\n      $contentFan_1.components.contentfan.decrementContentIndex()\n      $contentFan_2.components.contentfan.decrementContentIndex()\n      $contentFan_3.components.contentfan.decrementContentIndex()\n    }\n\n    // Originally from https://stackoverflow.com/a/23230280\n    var xDown = null;\n    var yDown = null;\n\n    function getTouches(evt) {\n      return evt.touches;\n    }\n\n    function handleTouchStart(evt) {\n      const firstTouch = getTouches(evt)[0];\n      xDown = firstTouch.clientX;\n      yDown = firstTouch.clientY;\n    };\n\n    function handleTouchMove(evt) {\n      if (!xDown || !yDown) {\n        return;\n      }\n\n      var xUp = evt.touches[0].clientX;\n      var yUp = evt.touches[0].clientY;\n\n      var xDiff = xDown - xUp;\n      var yDiff = yDown - yUp;\n\n      if (Math.abs(xDiff) > Math.abs(yDiff)) {/*most significant*/\n        if (xDiff > 0) {\n          /* left swipe */\n          handleSwipeLeft()\n        } else {\n          handleSwipeRight()\n          /* right swipe */\n        }\n      } else {\n        if (yDiff > 0) {\n          /* up swipe */\n        } else {\n          /* down swipe */\n        }\n      }\n      /* reset values */\n      xDown = null;\n      yDown = null;\n    };\n  }\n})"]}